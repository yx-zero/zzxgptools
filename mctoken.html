<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>mcToken Extractor (Local Only)</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 40px;
      background: #f0f0f0;
    }
    textarea {
      width: 100%;
      height: 200px;
      font-family: monospace;
      padding: 10px;
      font-size: 14px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
    button, label {
      margin-top: 10px;
      padding: 10px 16px;
      font-size: 15px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      display: inline-block;
    }
    button {
      background-color: #4CAF50;
      color: white;
    }
    button:hover {
      background-color: #45a049;
    }
    input[type="file"] {
      display: none;
    }
    .token-item {
      background: #fff;
      padding: 10px;
      margin: 8px 0;
      border-left: 5px solid #4CAF50;
      border-radius: 4px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      word-break: break-all;
    }
    .token-text {
      font-family: monospace;
    }
  </style>
</head>
<body>

  <h2>mcToken Extractor (Local Only)</h2>

  <textarea id="inputText" placeholder="Paste one entry per line..."></textarea><br>

  <button onclick="extractTokens()">Extract mcTokens</button>
  <label for="fileInput" style="background-color:#2196F3; color:white;">ðŸ“‚ Load from TXT file</label>
  <input type="file" id="fileInput" accept=".txt" onchange="handleFile(this)">

  <div id="resultBox" style="margin-top:30px;"></div>

  <script>
    function extractTokens() {
      const input = document.getElementById('inputText').value.trim();
      const lines = input.split(/\r?\n/);
      const resultBox = document.getElementById('resultBox');
      resultBox.innerHTML = '';

      let count = 0;

      lines.forEach((line) => {
        line = line.trim();

        const marker = 'Accesstoken:eyJra';
        const markerIndex = line.indexOf(marker);
        if (markerIndex !== -1) {
          const tokenStart = markerIndex + 'Accesstoken:'.length;
          const tokenEnd = line.indexOf('|', tokenStart);

          if (tokenEnd !== -1) {
            const fullToken = line.substring(tokenStart, tokenEnd).trim();
            const shortToken = fullToken.substring(0, 8) + '...';

            const div = document.createElement('div');
            div.className = 'token-item';

            const span = document.createElement('span');
            span.className = 'token-text';
            span.textContent = shortToken;

            const btn = document.createElement('button');
            btn.textContent = 'Copy';
            btn.onclick = () => {
              navigator.clipboard.writeText(fullToken).then(() => {
                btn.textContent = 'âœ… Copied';
                setTimeout(() => btn.textContent = 'Copy', 1500);
              });
            };

            div.appendChild(span);
            div.appendChild(btn);
            resultBox.appendChild(div);
            count++;
          }
        }
      });

      if (count === 0) {
        resultBox.innerHTML = '<p>No mcToken found.</p>';
      }
    }

    function handleFile(input) {
      const file = input.files[0];
      if (!file) return;

      const reader = new FileReader();
      reader.onload = function(e) {
        const text = e.target.result;
        document.getElementById('inputText').value = text;
        extractTokens();
      };
      reader.readAsText(file);
    }
  </script>

</body>
</html>
